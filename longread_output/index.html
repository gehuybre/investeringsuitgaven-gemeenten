<!DOCTYPE html>
<html lang="nl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investeringsuitgaven Gemeenten</title>
    <meta name="description" content="Een visualisatie van de gemeentelijke investeringsuitgaven in Vlaanderen.">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- Template CSS -->
    <link rel="stylesheet" href="css/layout-template.css">
    <link rel="stylesheet" href="css/longread-custom.css">
    
    <style>
        /* Specific overrides */
        .hero-main {
            background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1596433852652-f5eb5a8c35a6?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }
        
        .map-container {
            height: 600px;
            width: 100%;
            background: #f0f0f0;
            border-radius: 8px;
            z-index: 1;
        }
        
        .dashboard-grid {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin-top: 2rem;
        }

        .dashboard-controls {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            width: 100%;
        }

        .dashboard-chart-container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 500px;
            width: 100%;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .chart-view-toggle {
            display: flex;
            align-items: center;
        }

        .btn-view-toggle {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            color: #333;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-view-toggle:hover {
            background: #f0f0f0;
            border-color: #029453;
        }

        .btn-view-toggle:focus {
            outline: 2px solid #029453;
            outline-offset: 2px;
        }
        
        .chart-wrapper {
            position: relative;
            height: 400px;
            width: 100%;
        }

        .chart-controls-row {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid #e0e0e0;
        }

        /* Municipality Detail Panel */
        .detail-panel {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 2rem;
            display: none;
        }

        .detail-panel.active {
            display: block;
        }

        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #029453;
            padding-bottom: 1rem;
        }

        .detail-header h3 {
            margin: 0;
            color: #029453;
        }

        .detail-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .detail-close:hover {
            background: #f0f0f0;
            color: #333;
        }

        .detail-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-box {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            border-left: 3px solid #029453;
        }

        .stat-box .stat-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 0.25rem;
        }

        .stat-box .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .stat-box .stat-subvalue {
            font-size: 0.9rem;
            color: #888;
            margin-top: 0.25rem;
        }

        .rekeningen-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .rekeningen-table th,
        .rekeningen-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .rekeningen-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .rekeningen-table tr:hover {
            background: #f8f9fa;
        }

        .rekeningen-table .bedrag-col {
            text-align: right;
            font-weight: 600;
        }

        .rekeningen-table .evolution-col {
            background: #f0f8f4;
            text-align: right;
            font-style: italic;
            color: #555;
        }

        .rekeningen-table .code-col {
            font-family: monospace;
            color: #666;
            font-size: 0.9rem;
        }

        .detail-table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .detail-table-header h4 {
            margin: 0;
        }

        .detail-view-toggle {
            display: flex;
            gap: 0.5rem;
        }

        .detail-toggle-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            background: white;
            color: #666;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .detail-toggle-btn:hover {
            border-color: #029453;
            color: #029453;
            background: #f8f9fa;
        }

        .detail-toggle-btn.active {
            border-color: #029453;
            background: #029453;
            color: white;
            font-weight: 600;
        }

        .detail-toggle-btn:focus {
            outline: 2px solid #029453;
            outline-offset: 2px;
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 6px;
            padding: 1rem;
            margin-top: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .warning-box .warning-icon {
            color: #856404;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .warning-box .warning-text {
            flex: 1;
            font-size: 0.9rem;
            color: #856404;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .detail-stats {
                grid-template-columns: 1fr;
            }
            
            .rekeningen-table {
                font-size: 0.85rem;
            }
            
            .rekeningen-table th,
            .rekeningen-table td {
                padding: 0.5rem 0.25rem;
            }
            
            .detail-panel {
                padding: 1rem;
            }

            .detail-table-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }

            .detail-view-toggle {
                width: 100%;
            }

            .detail-toggle-btn {
                flex: 1;
                padding: 0.5rem 0.5rem;
                font-size: 0.85rem;
            }
        }

        .small-multiples-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .small-multiple-chart {
            background: #fafafa;
            padding: 1rem;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }

        .small-multiple-chart h4 {
            margin: 0 0 0.5rem 0;
            font-size: 0.95rem;
            font-weight: 600;
            color: #333;
        }

        .small-multiple-chart canvas {
            max-height: 200px;
        }

        /* Common legend for grid */
        .common-legend {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
            margin-bottom: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 20px;
            height: 14px;
            border-radius: 2px;
            border: 1px solid rgba(0,0,0,0.2);
        }

        .legend-label {
            color: #333;
            font-weight: 500;
        }

        /* Provincial Table View Styles */
        .province-table-view {
            margin-top: 1.5rem;
        }

        .province-beleidsveld-table {
            margin-bottom: 3rem;
        }

        .province-beleidsveld-table h4 {
            color: #029453;
            font-size: 1.25rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .info-panel {
            background: #f8f9fa;
            padding: 1.5rem;
            border-left: 4px solid #029453;
            margin-bottom: 2rem;
        }

        .control-group {
            margin-bottom: 1.5rem;
        }

        .control-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #333;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        /* Tab Navigation */
        .tab-navigation {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            margin-bottom: -2px;
        }

        .tab-button:hover {
            color: #029453;
            background: rgba(2, 148, 83, 0.05);
        }

        .tab-button.active {
            color: #029453;
            border-bottom-color: #029453;
            font-weight: 600;
        }

        .tab-button:focus {
            outline: 2px solid #029453;
            outline-offset: 2px;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Search Container */
        .search-container {
            margin-bottom: 1rem;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #029453;
            box-shadow: 0 0 0 3px rgba(2, 148, 83, 0.1);
        }

        .search-input:disabled {
            background: #f5f5f5;
            cursor: not-allowed;
        }

        /* Checkbox List */
        .checkbox-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 0.5rem;
            background: #fafafa;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.25rem;
            border-radius: 4px;
            transition: background-color 0.2s ease;
            cursor: pointer;
        }

        .checkbox-item:hover {
            background: #e8f4f0;
        }

        .checkbox-item:focus-within {
            background: #e8f4f0;
            outline: 2px solid #029453;
            outline-offset: -2px;
        }

        .checkbox-item.hidden {
            display: none;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 0.75rem;
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #029453;
        }

        .checkbox-item label {
            flex: 1;
            cursor: pointer;
            font-size: 0.95rem;
            color: #333;
            -webkit-user-select: none;
            user-select: none;
        }

        .checkbox-item input[type="checkbox"]:checked + label {
            font-weight: 600;
            color: #029453;
        }

        /* Select All Container */
        .select-all-container {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e0e0e0;
        }

        .btn-select-all,
        .btn-deselect-all {
            flex: 1;
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            color: #333;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-select-all:hover {
            background: #029453;
            color: white;
            border-color: #029453;
        }

        .btn-deselect-all:hover {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        /* Checkbox Toggle for Inflation */
        .inflation-toggle-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 0.5rem 0;
        }

        .price-checkbox-container {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        .price-checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .price-checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #029453;
        }

        .price-checkbox-item label {
            font-size: 0.85rem;
            color: #555;
            cursor: pointer;
            -webkit-user-select: none;
            user-select: none;
        }

        .price-checkbox-item input[type="checkbox"]:checked + label {
            color: #029453;
            font-weight: 600;
        }

        .btn-select-all:focus,
        .btn-deselect-all:focus {
            outline: 2px solid #029453;
            outline-offset: 2px;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                flex-direction: column;
            }

            .tab-navigation {
                flex-wrap: wrap;
            }

            .tab-button {
                flex: 1;
                min-width: 0;
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }

            .checkbox-list {
                max-height: 250px;
            }

            .chart-header {
                flex-direction: column;
                gap: 1rem;
            }

            .chart-controls-row {
                margin-top: 0.5rem;
            }

            .price-checkbox-container {
                flex-direction: row;
                gap: 1rem;
            }

            .small-multiples-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header__container">
            <div class="header__logo">
                <img src="assets/logo.png" alt="Logo" style="height: 40px; max-width: 200px;">
            </div>
            <div class="header__menu">
                <nav class="header__navigation">
                    <a href="#intro">Info</a>
                    <a href="#kaart">Kaart</a>
                    <a href="#dashboard">Dashboard</a>
                    <a href="#provincies-sectie">Provincies</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-main">
        <div class="hero__content">
            <h1 class="hero__title" style="font-size: 4rem; margin-bottom: 1rem;">Investeringsuitgaven gemeenten</h1>
            <p class="hero__subtitle">Een analyse van de jaarrekeningen per inwoner (2014-2024)</p>
        </div>
    </section>

    <!-- Intro Section -->
    <section id="intro" class="content-section">
        <div class="container">
            <h2 class="mb-md">Wat zijn investeringsuitgaven?</h2>
            <div class="info-panel">
                <h3>I.1 Investeringsuitgaven - per inwoner</h3>
                <p>
                    Deze indicator is gebaseerd op de jaarrekeningen van de lokale besturen (BBC). 
                    Het omvat de uitgaven voor de verwerving van duurzame goederen zoals gronden, gebouwen, 
                    wegen en ander infrastructuurwerken. Het cijfer wordt uitgedrukt per inwoner om een 
                    eerlijke vergelijking tussen gemeenten mogelijk te maken.
                </p>
                <p class="mt-sm">
                    <small>Bron: Agentschap Binnenlands Bestuur, verwerking Embuild Vlaanderen</small>
                </p>
            </div>
            <p class="lead">
                Lokale besturen spelen een cruciale rol in publieke investeringen. Van de aanleg van nieuwe fietspaden 
                tot de renovatie van sportcentra en de vergroening van dorpskernen. Deze data toont de evolutie 
                van deze inspanningen over het afgelopen decennium.
            </p>
        </div>
    </section>

    <!-- Map Section -->
    <section id="kaart" class="content-section bg-gray">
        <div class="container">
            <h2 class="mb-md">Investeringen in beeld (2024)</h2>
            <p class="mb-md">
                De onderstaande kaart toont de investeringsuitgaven per inwoner voor het jaar 2024. 
                Klik op een gemeente om de details te bekijken.
            </p>
            
            <div id="map" class="map-container"></div>
            <div class="legend mt-sm text-center text-muted">
                <small>
                    <strong>Kleuerschaal:</strong> De kleuren zijn gebaseerd op percentielen van het maximum. 
                    Donkerder = hoger investeringsbedrag per inwoner. 
                    Zie de legende rechtsonder op de kaart voor de exacte waarden.
                </small>
            </div>

            <!-- Municipality Detail Panel -->
            <div id="municipality-detail" class="detail-panel">
                <div class="detail-header">
                    <div>
                        <h3 id="detail-municipality-name">Gemeente</h3>
                        <p id="detail-municipality-province" class="text-muted"></p>
                    </div>
                    <button id="detail-close-btn" class="detail-close" aria-label="Sluit detail paneel">×</button>
                </div>

                <div class="detail-stats">
                    <div class="stat-box">
                        <div class="stat-label">Totaal 2024</div>
                        <div class="stat-value" id="detail-total-2024">€ -</div>
                        <div class="stat-subvalue">per inwoner</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Som op basis van beleidsdomein</div>
                        <div class="stat-value" id="detail-sum-beleidsdomein">€ -</div>
                        <div class="stat-subvalue" id="detail-difference-beleidsdomein">verschil: € -</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Som op basis van rekeningen</div>
                        <div class="stat-value" id="detail-sum-rekeningen">€ -</div>
                        <div class="stat-subvalue" id="detail-difference-rekeningen">verschil: € -</div>
                    </div>
                </div>

                <div id="detail-warning" class="warning-box">
                    <div class="warning-icon">⚠</div>
                    <div class="warning-text" id="detail-warning-text">
                        Er is een verschil tussen de som van de details en het totaal. 
                        Dit kan duiden op ontbrekende rekeningen in de gedetailleerde data.
                    </div>
                </div>

                <div class="detail-table-header">
                    <h4 class="mt-md mb-sm" id="detail-table-title">Top 10 per beleidsveld</h4>
                    <div class="detail-view-toggle">
                        <button class="detail-toggle-btn" data-view="uitgavenpost" id="toggle-uitgavenpost">
                            Per uitgavenpost
                        </button>
                        <button class="detail-toggle-btn active" data-view="beleidsveld" id="toggle-beleidsveld">
                            Per beleidsveld
                        </button>
                    </div>
                </div>
                <table class="rekeningen-table" id="detail-rekeningen-table">
                    <thead>
                        <tr>
                            <th class="code-col">Code</th>
                            <th id="detail-table-header-col">Rekening</th>
                            <th class="bedrag-col">Bedrag</th>
                        </tr>
                    </thead>
                    <tbody id="detail-rekeningen-tbody">
                        <!-- Populated by JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="content-section">
        <div class="container">
            <h2 class="mb-md">Dashboard: evolutie 2014-2024</h2>
            
            <div class="dashboard-grid">
                <!-- Chart Area -->
                <div class="dashboard-chart-container">
                    <div class="chart-header">
                        <div>
                            <h3 id="selected-label" class="mb-sm">Vlaanderen (gemiddelde)</h3>
                            <p id="dashboard-subtitle" class="text-muted mb-md">
                        <span id="subtitle-text">Investeringsuitgaven per inwoner (€)</span>
                    </p>
                        </div>
                </div>
                
                <div class="chart-controls-row">
                    <div class="inflation-toggle-group">
                        <div class="price-checkbox-container">
                            <div class="price-checkbox-item">
                                <input type="checkbox" id="toggle-nominal" checked>
                                <label for="toggle-nominal">Nominaal</label>
                            </div>
                            <div class="price-checkbox-item">
                                <input type="checkbox" id="toggle-adjusted">
                                <label for="toggle-adjusted">Reëel (2014)</label>
                            </div>
                            <div class="price-checkbox-item">
                                <input type="checkbox" id="toggle-stacked">
                                <label for="toggle-stacked">Opgesplitst per beleidsdomein</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-wrapper" id="chart-wrapper">
                        <canvas id="investmentChart"></canvas>
                    </div>
                    <div class="small-multiples-container" id="small-multiples-container" style="display: none;">
                        <!-- Small multiples will be generated here -->
                    </div>
                </div>

                <!-- Controls Below Chart -->
                <div class="dashboard-controls">
                    <h3>Instellingen</h3>
                    
                    <!-- Tab Navigation -->
                    <div class="tab-navigation">
                        <button class="tab-button active" data-tab="vlaanderen">Vlaanderen</button>
                        <button class="tab-button" data-tab="provincies">Provincies</button>
                        <button class="tab-button" data-tab="gemeenten">Gemeenten</button>
                    </div>

                    <!-- Vlaanderen Tab -->
                    <div class="tab-content active" id="tab-vlaanderen">
                        <div class="search-container">
                            <input type="text" class="search-input" id="search-vlaanderen" placeholder="Zoek..." disabled>
                        </div>
                        <div class="checkbox-list" id="checkbox-list-vlaanderen">
                            <!-- Populated by JS -->
                        </div>
                        <div class="select-all-container">
                            <button class="btn-select-all" data-tab="vlaanderen">Selecteer alles</button>
                            <button class="btn-deselect-all" data-tab="vlaanderen">Deselecteer alles</button>
                        </div>
                    </div>

                    <!-- Provincies Tab -->
                    <div class="tab-content" id="tab-provincies">
                        <div class="search-container">
                            <input type="text" class="search-input" id="search-provincies" placeholder="Zoek provincie...">
                        </div>
                        <div class="checkbox-list" id="checkbox-list-provincies">
                            <!-- Populated by JS -->
                        </div>
                        <div class="select-all-container">
                            <button class="btn-select-all" data-tab="provincies">Selecteer alles</button>
                            <button class="btn-deselect-all" data-tab="provincies">Deselecteer alles</button>
                        </div>
                    </div>

                    <!-- Gemeenten Tab -->
                    <div class="tab-content" id="tab-gemeenten">
                        <div class="search-container">
                            <input type="text" class="search-input" id="search-gemeenten" placeholder="Zoek gemeente...">
                        </div>
                        <div class="checkbox-list" id="checkbox-list-gemeenten">
                            <!-- Populated by JS -->
                        </div>
                        <div class="select-all-container">
                            <button class="btn-select-all" data-tab="gemeenten">Selecteer alles</button>
                            <button class="btn-deselect-all" data-tab="gemeenten">Deselecteer alles</button>
                        </div>
                    </div>

                    <div class="info-text text-muted">
                        <small>Gebruik de zoekfunctie in de lijst of klik op de kaart om een gemeente te selecteren.</small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Provincial Investment Section -->
    <section id="provincies-sectie" class="content-section bg-gray">
        <div class="container">
            <h2 class="mb-md">Provinciale investeringen</h2>
            <div class="info-panel">
                <h3>Geplande investeringen uit meerjarenplannen</h3>
                <p>
                    Deze sectie toont de <strong>geplande investeringsuitgaven per inwoner</strong> van de vijf Vlaamse provinciebesturen, 
                    gebaseerd op hun meerjarenplannen. In tegenstelling tot de gemeentelijke cijfers (werkelijk gerealiseerde investeringen), 
                    gaat het hier om voorgenomen investeringen voor toekomstige periodes.
                </p>
                <p class="mt-sm">
                    We vergelijken drie meerjarenplannen:
                </p>
                <ul>
                    <li><strong>2014-2019:</strong> Eerste legislatuur (totale geplande investeringen voor deze periode)</li>
                    <li><strong>2020-2025:</strong> Tweede legislatuur (gefilterd: alleen jaren 2020-2025 uit het 2020-2027 plan)</li>
                    <li><strong>2026-2031:</strong> Huidige legislatuur (totale geplande investeringen voor deze periode)</li>
                </ul>
                <p class="mt-sm">
                    <small><em>Let op: Niet alle provincies hebben volledige cijfers voor 2026-2031 beschikbaar.</em></small>
                </p>
            </div>

            <!-- Provincial Chart Dashboard -->
            <div class="dashboard-chart-container">
                <div class="chart-header">
                    <div>
                        <h3 id="province-selected-label" class="mb-sm">Alle provincies</h3>
                        <p class="text-muted mb-md">
                            <span id="province-subtitle-text">Geplande investeringsuitgaven per inwoner (€) per periode</span>
                        </p>
                    </div>
                </div>
                
                <div class="chart-controls-row">
                    <div class="inflation-toggle-group">
                        <div class="price-checkbox-container">
                            <div class="price-checkbox-item">
                                <input type="checkbox" id="province-toggle-nominal" checked>
                                <label for="province-toggle-nominal">Nominaal</label>
                            </div>
                            <div class="price-checkbox-item">
                                <input type="checkbox" id="province-toggle-adjusted">
                                <label for="province-toggle-adjusted">Reëel (2014)</label>
                            </div>
                            <div class="price-checkbox-item">
                                <input type="checkbox" id="province-toggle-stacked">
                                <label for="province-toggle-stacked">Opgesplitst per beleidsdomein</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-wrapper" id="province-chart-wrapper">
                        <canvas id="province-chart"></canvas>
                    </div>
                    <div id="province-legend-container" style="display: none;">
                        <!-- Common legend will be generated here -->
                    </div>
                    <div class="small-multiples-container" id="province-small-multiples-container" style="display: none;">
                        <!-- Small multiples will be generated here -->
                    </div>
                </div>
            </div>

            <!-- Provincial Detail Tables -->
            <div class="dashboard-chart-container mt-lg">
                <h3>Detailcijfers per provincie</h3>
                
                <!-- Tab Navigation for Provincial Data -->
                <div class="detail-table-header">
                    <div class="detail-view-toggle">
                        <button class="detail-toggle-btn active" id="province-toggle-totaal">Totaal</button>
                        <button class="detail-toggle-btn" id="province-toggle-beleidsveld">Per Beleidsveld</button>
                        <button class="detail-toggle-btn" id="province-toggle-rekening">Per Rekening</button>
                    </div>
                </div>

                <!-- Total Overview Table -->
                <div id="province-table-totaal" class="province-table-view">
                    <div class="table-responsive">
                        <table class="rekeningen-table">
                            <thead>
                                <tr>
                                    <th>Provincie</th>
                                    <th class="text-right">2014-2019<br><small>(€ per inwoner)</small></th>
                                    <th class="text-right evolution-col">Evolutie<br><small>(t.o.v. vorige)</small></th>
                                    <th class="text-right">2020-2025<br><small>(€ per inwoner)</small></th>
                                    <th class="text-right evolution-col">Evolutie<br><small>(t.o.v. vorige)</small></th>
                                    <th class="text-right">2026-2031<br><small>(€ per inwoner)</small></th>
                                </tr>
                            </thead>
                            <tbody id="province-table-body">
                                <!-- Populated by JS -->
                            </tbody>
                            <tfoot>
                                <tr class="font-semibold">
                                    <td>Gemiddelde</td>
                                    <td class="text-right" id="avg-2014-2019">-</td>
                                    <td class="text-right evolution-col" id="avg-evolution-1">-</td>
                                    <td class="text-right" id="avg-2020-2025">-</td>
                                    <td class="text-right evolution-col" id="avg-evolution-2">-</td>
                                    <td class="text-right" id="avg-2026-2031">-</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <p class="mt-sm text-muted">
                        <small>
                            * Bedragen zijn uitgedrukt in euro per inwoner voor de hele periode van het meerjarenplan.<br>
                            ** Niet alle provincies hebben volledige data voor 2026-2031.<br>
                            *** Evolutie wordt berekend tussen de laatste beschikbare periode en de voorlaatste periode.
                        </small>
                    </p>
                </div>

                <!-- Per Beleidsveld Table -->
                <div id="province-table-beleidsveld" class="province-table-view" style="display: none;">
                    <div class="mb-md">
                        <p class="text-muted mb-sm"><strong>Selecteer provincie:</strong></p>
                        <div class="detail-view-toggle" id="province-beleidsveld-buttons">
                            <!-- Populated by JS: Province buttons -->
                        </div>
                    </div>
                    
                    <div id="province-beleidsveld-container">
                        <!-- Populated by JS: Table showing beleidsdomein breakdown for selected province -->
                    </div>
                </div>

                <!-- Per Rekening Table -->
                <div id="province-table-rekening" class="province-table-view" style="display: none;">
                    <div class="mb-md">
                        <p class="text-muted mb-sm"><strong>Selecteer provincie:</strong></p>
                        <div class="detail-view-toggle" id="province-rekening-buttons">
                            <!-- Populated by JS: Province buttons -->
                        </div>
                    </div>

                    <div class="warning-box mb-md">
                        <span class="warning-icon">⚠</span>
                        <div class="warning-text">
                            <strong>Let op:</strong> De rekeningen data is een subset van de totale investeringen. 
                            Niet alle investeringen zijn opgesplitst per rekening in het bronbestand. 
                            De som van de rekeningen is daarom lager dan het totaal per beleidsveld.
                        </div>
                    </div>
                    
                    <div id="province-rekening-container">
                        <!-- Populated by JS: Table showing rekening breakdown for selected province -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="text-center text-muted">
                Data visualisatie | Bron: Agentschap Binnenlands Bestuur, verwerking Embuild Vlaanderen | Verwerking 2025 (fusies inbegrepen)
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- App Logic - Modular Structure -->
    <script type="module" src="js/app.js?v=20251204"></script>
</body>
</html>
